@page "/home"
@rendermode InteractiveServer
@inject ApplicationDbContext DbContext
@inject UserSessionService UserSession
@inject NavigationManager Navigation
@using Microsoft.EntityFrameworkCore

<PageTitle>Home</PageTitle>

@if (UserSession.LoggedInStudent is not null)
{
    <h1>Welcome, @UserSession.LoggedInStudent.FirstName!</h1>
}
else
{
    <h1>Redirecting...</h1> <!-- Optional, user won't see this -->
}

<button class="btn btn-success mt-3" @onclick="GoToQuiz">Access Quiz</button>

@code {
    protected override void OnInitialized()
    {
        // Redirect immediately if not logged in
        if (UserSession.LoggedInStudent is null)
        {
            Navigation.NavigateTo("/", true); // full reload
            return;
        }
    }

    private void GoToQuiz()
    {
        Navigation.NavigateTo("/quiz");
    }
}
